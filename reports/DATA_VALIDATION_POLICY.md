# Data Validation Policy (100%)

Цель: **100% проверка** корректности датасета перед обучением.

## Обязательные критерии (must‑pass)
1) **Структура**
- `config.json`, `metadata_2col.csv`, `wavs/` существуют.
- Все пути из `metadata_2col.csv` указывают на реальные WAV.

2) **Полное соответствие строк ↔ файлов**
- Кол-во строк = кол-ву WAV.
- Нет дубликатов имён файлов.
- Нет пустых строк.

3) **Формат аудио**
- WAV: mono, PCM16, одинаковый sample_rate.
- Длительность каждого файла > 0.2s.
- Нет битых/нулевых файлов.

4) **Текст**
- Высокая доля кириллицы (RU).
- Нет мусорных/непечатаемых символов.
- Нормализация тире/кавычек.
- Длина текста в пределах допустимых порогов (фиксировать в отчёте).

5) **Фонемизация**
- В `config.json`: `phoneme_type=espeak`, `espeak.voice=ru`.
- Фонемизация проходит без ошибок.

6) **Семантическая сверка**
- Whisper‑проверка **по всем WAV**.
- Метрика сходства (например SequenceMatcher).
- Порог OK: $\ge 0.80$ (можно уточнить, но фиксировать в отчёте).

## Итог и артефакты
- Итоговый вердикт: PASS/FAIL.
- Сводка: counts, min/avg similarity, число ошибок.
- Список проблемных строк с причинами.
- Дата и версия датасета.

## Скрипт валидации
Используйте `script/validate_dataset_full.py` для генерации отчёта.

## Хранение отчётов
- Все отчёты сохраняются в `reports/`.
- Краткая запись состояния — в `docs/obsidian/STATE.md` основного workspace.
